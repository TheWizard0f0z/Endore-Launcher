<Window x:Class="AktualizatorEME.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Aktualizator EME" 
        Height="600" Width="1024" 
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Loaded="Window_Loaded">

    <Window.Background>
        <ImageBrush ImageSource="pack://application:,,,/Resources/middle-earth-map.jpg" 
                    Stretch="UniformToFill" />
    </Window.Background>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#111111" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <TextBlock Text="Endore Middle-Earth Launcher" Foreground="#555555" VerticalAlignment="Center" Margin="10,0" IsHitTestVisible="False"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="_" Style="{StaticResource SystemButtonStyle}" Click="MinimizeButton_Click"/>
                    <Button Content="✕" Style="{StaticResource SystemButtonStyle}" Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1" Margin="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Rectangle Grid.Row="0" Grid.RowSpan="4" Grid.Column="0" Grid.ColumnSpan="2"
                       Width="300" Height="300" HorizontalAlignment="Center" VerticalAlignment="Center"
                       Opacity="0.9" RenderTransformOrigin="0.5,0.5">
                <Rectangle.Fill>
                    <SolidColorBrush Color="#C2C2C2"/>
                </Rectangle.Fill>
                <Rectangle.OpacityMask>
                    <ImageBrush ImageSource="pack://application:,,,/Resources/Endore_circular_inscription.png"/>
                </Rectangle.OpacityMask>
                <Rectangle.RenderTransform>
                    <RotateTransform x:Name="RingRotationTransform" Angle="0" />
                </Rectangle.RenderTransform>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="RingRotationTransform"
                                                 Storyboard.TargetProperty="Angle"
                                                 From="0" To="360" Duration="0:0:59"
                                                 RepeatBehavior="Forever" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>

            <Rectangle Grid.Row="0" Grid.RowSpan="4" Grid.Column="0" Grid.ColumnSpan="2"
                       Width="370" Height="44" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       Opacity="0.9" 
                       IsHitTestVisible="False">
                <Rectangle.Fill>
                    <SolidColorBrush Color="#F5F5F5"/> 
                </Rectangle.Fill>
                <Rectangle.OpacityMask>
                    <ImageBrush ImageSource="pack://application:,,,/Resources/Endore_wordmark.png"/>
                </Rectangle.OpacityMask>
            </Rectangle>

            <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,20,0,0" Width="250">
    
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,25,20">
                    <Ellipse x:Name="StatusDot" Width="12" Height="12" Fill="Gray" Margin="0,0,8,0">
                        <Ellipse.Effect>
                            <DropShadowEffect x:Name="DotGlow" Color="Black" BlurRadius="5" ShadowDepth="0"/>
                        </Ellipse.Effect>
                    </Ellipse>
                    <TextBlock x:Name="StatusText" Text="Sprawdzanie..." Foreground="#CCCCCC" FontSize="16" FontWeight="Bold"/>
                </StackPanel>

                <Button x:Name="DiscordButton" 
                        Content="DISCORD" 
                        Style="{StaticResource MenuButtonStyle}" 
                        Height="50" 
                        Margin="0,0,0,5" 
                        Click="DiscordButton_Click"/>
                <Button x:Name="WikiButton" 
                        Content="WIKI" 
                        Style="{StaticResource MenuButtonStyle}" 
                        Height="50" 
                        Click="WikiButton_Click"/>
            </StackPanel>

            <TextBox Grid.Row="0" Grid.Column="0" x:Name="StatusEditor" Style="{StaticResource LoggerStyle}" Margin="0,0,0,10"/>

            <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                <CheckBox x:Name="MusicSwitch" Content="Włącz muzykę" Margin="0,0,15,0" Foreground="White"/>
                <CheckBox x:Name="SkipClassicUOCheckBox" Content="Nie nadpisuj ClassicUO" Foreground="White"/>
            </StackPanel>

            <StackPanel Grid.Row="2" Grid.Column="0" VerticalAlignment="Bottom" Margin="0,0,0,10">
                <Button x:Name="SelectLocationButton" Content="Wybierz lokalizację gry" Margin="0,5"/>
                <Button x:Name="UpdateButton" Content="AKTUALIZUJ" FontWeight="Bold" Height="45" Margin="0,5,0,0"/>
            </StackPanel>

            <TextBlock x:Name="ProgressPercentage" Text="0%" Grid.Row="3" Grid.Column="0" Foreground="White" 
                       FontWeight="Bold" FontSize="14" Margin="5,0,0,28" VerticalAlignment="Bottom"/>

            <ProgressBar Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                         x:Name="UpdateProgressBar" 
                         Style="{StaticResource Modern3DProgressBarStyle}"
                         Height="20" 
                         Margin="0,0,320,0" 
                         VerticalAlignment="Bottom"
                         Opacity="0.9"/>

            <StackPanel Grid.Row="3" Grid.Column="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="300">
                <Border Background="#1A1A1A" BorderBrush="#444444" BorderThickness="1" Margin="0,0,0,10" Opacity="0.9">
                    <Grid>
                        <StackPanel VerticalAlignment="Center" Margin="10">
                            <TextBlock Text="AKTUALNY PROFIL" Foreground="#555555" FontSize="10" FontWeight="Bold"/>
                            <StackPanel>
                                <TextBlock x:Name="CurrentProfileName" Text="Wybierz profil..." Foreground="White" FontSize="16" FontWeight="Bold" VerticalAlignment="Center"/>
                                <Border x:Name="DevBadge" 
                                        Background="Orange" 
                                        Width="35" Height="16" 
                                        CornerRadius="2" 
                                        Margin="0,4,0,0" 
                                        Visibility="Collapsed"
                                        HorizontalAlignment="Left">
                                    <TextBlock Text="DEV" Foreground="Black" FontWeight="Bold" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                        <Button Content="ZMIEŃ" HorizontalAlignment="Right" Width="70" Height="25" 
                                FontSize="10" Padding="0" Click="OpenProfileManager_Click" VerticalAlignment="Center" Margin="10"/>
                    </Grid>
                </Border>

                <Button x:Name="PlayButton" Content="URUCHOM GRĘ" 
                        FontWeight="Bold" FontSize="18" Height="60" Width="300" 
                        HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0"
                        BorderBrush="#444444" BorderThickness="1"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>